<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{/admin/layout}" th:with="title='Schools List'">
<head>
<meta charset="UTF-8" />
<link rel="stylesheet" th:href="@{/datatables/select/css/select.bootstrap.css}" />
<link rel="stylesheet" th:href="@{/datatables/css/dataTables.bootstrap.css}" />
</head>
<body>
	
	<div layout:fragment="subject">
	<h2 th:text="${school.name + ' - Role - Edit'}">Role - Edit </h2>
		<div class="col-md-12" >
			<ul class="breadcrumb">
				<li class="breadcrumb-item"><a th:href="@{/}">Home</a></li>
				<li class="breadcrumb-item "><a th:href="@{/admin/school}">Schools</a></li>
				<li class="breadcrumb-item "><a th:href="${'/admin/school/'+{school.id}+'/roles/'}">Roles</a></li>
				<li class="breadcrumb-item active">Edit</li>
			</ul>
		</div>
	</div>

	<div class="row" layout:fragment="content">
		<div class="col-lg-12">
			<div class="ibox ">
				<div class="ibox-title">
					<h5></h5>
					<div class="ibox-tools">
						<a class="collapse-link"> <i class="fa fa-chevron-up"></i>
						</a> <a class="dropdown-toggle" data-toggle="dropdown" href="#"> <i class="fa fa-wrench"></i>
						</a>
						<ul class="dropdown-menu dropdown-user">
							<li><a href="#" class="dropdown-item">Config option 1</a></li>
							<li><a href="#" class="dropdown-item">Config option 2</a></li>
						</ul>
						<a class="close-link"> <i class="fa fa-times"></i>
						</a>
					</div>
				</div>
				<div class="ibox-content">
					<form role="form" method="post" th:action="${'/admin/school/'+{school.id}+'/role/'}" th:object="${role}">
					<div hidden="hidden">
							<ul id="fieldErrors" th:if="${#fields.hasErrors('*')}">
								<li th:each="e : ${#fields.detailedErrors()}" th:text="${e.global}? '*' : ${e.fieldName}"></li>
							</ul>
						</div>
						<div hidden="hidden">
							<ul id="fieldMessages" th:if="${#fields.hasErrors('*')}" >
								<li th:each="e : ${#fields.detailedErrors()}" th:attr="field=${e.fieldName}" th:text="${e.message}"></li>
							</ul>
						</div>

                         <div class="row">
							<div class="col-lg-6 col-md-6 col-xs-12">
								<div class="form-group">
									<label>Name*</label> <input type="text" class="form-control" th:field="*{name}" placeholder="Role Name"
										aria-describedby="basic-addon1">
								</div>
							</div>
							<div class="col-lg-6 col-md-6 col-xs-12">
								<div class="form-group">
									<label>Email</label> <input type="email" class="form-control" th:field="*{email}" placeholder="Email"
										aria-describedby="basic-addon1">
								</div>
							</div>
						</div>
							
							<div class="form-group row">
									<div class="col-sm-5">
									<label for="left-selector" class="control-label" style="text-align: left">Available Permissions</label>
										<select multiple="multiple" class="form-control left-selector" id="left-selector">
											<option th:each="permission : ${permissionList}" th:value="${permission.id}" th:text="${permission.description}"></option>
										</select>
									</div>
									<div class="col-sm-2" style="vertical-align:middle;">
										
										<button class="btn btn-default right-btn"><i class="fa fa-long-arrow-right" aria-hidden="true"></i></button>
										<button class="btn btn-default pull-right left-btn"><i class="fa fa-long-arrow-left" aria-hidden="true"></i></button>
									</div>
									
									<div class="col-sm-5">
									<label for="right-selector" class="control-label" style="text-align:left" >Assigned Permissions</label>
										<select multiple="multiple" th:field="*{permissions}" class="form-control right-selector" id="right-selector">
											<option th:each="permission : *{permissions}" th:value="${permission.id}" th:text="${permission.description}"></option>
										</select>
										</div>
							</div>
									<div class="form-group row">
							<div class="col-sm-4 col-sm-offset-2">
								<button class="btn btn-w-m btn-primary" id="createOrUpdateSchool">Submit</button>
								<input th:hidden="hidden" th:field="*{id}">
								<input th:hidden="hidden" th:field="*{version}">
							</div>
						</div>

                    </form>
				</div>

			</div>
		</div>
	</div>
</body>


<th:block layout:fragment="scripts">
<script th:inline="javascript">
		/*<![CDATA[*/
$(document).ready(function() {
	$('.left-btn').click(
			function() {
				return !$('.right-selector option:selected').remove().appendTo('.left-selector');
			});
	$('.right-btn').click(
			function() {
				return !$('.left-selector option:selected').remove().appendTo('.right-selector');
			});
});
$("form").submit(function(e) {
	$('.right-selector option').prop("selected", true);	
});
/*]]>*/
</script>
</th:block>